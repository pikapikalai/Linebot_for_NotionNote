# LINE Bot 活動管理系統 - 測試說明

## 功能測試說明

本文檔提供了關於測試新實現的 Rich Menu 和 Flex Message 功能的指南。

### 已實現的功能

1. **Rich Menu 主選單**
   - 三區域設計: 設定活動、查詢活動、手動提醒
   - 通過點擊選單區域直接訪問相應功能
   - 使用暫時替代圖片，方便測試

2. **Flex Message 活動設定表單**
   - 整合設定流程，將四步流程簡化為一次性表單
   - 支持日期時間、重要性、分類的選擇
   - 支持活動名稱和備註的輸入

### 測試步驟

#### 1. 部署環境準備

1. 確保安裝所有依賴:
   ```
   pip install -r requirements.txt
   ```

2. 啟動服務器:
   ```
   python main.py
   ```

3. 初始化 Rich Menu:
   - 訪問 `https://你的網域/init_rich_menu`
   - 或在本地測試時 `http://localhost:8000/init_rich_menu`
   - 檢查控制台輸出，確認 Rich Menu 創建成功

#### 2. Rich Menu 測試

1. 打開 LINE 應用，進入你的 Bot 聊天
2. 確認底部選單欄已顯示 "開啟活動管理選單" 文字
3. 點擊選單，驗證以下功能:
   - 點擊左側區域 → 打開活動設定表單
   - 點擊中間區域 → 打開查詢活動選項
   - 點擊右側區域 → 發送"手動提醒"指令

#### 3. Flex Message 表單測試

1. 點擊 Rich Menu 中的 "設定活動" 區域
2. 確認 Flex Message 表單顯示正常，包含以下元素:
   - 日期時間選擇
   - 重要性選擇 (高、中、低)
   - 分類選擇 (會議、活動、提醒、任務)
   - 活動名稱輸入
   - 備註輸入
   - 送出按鈕

3. 測試互動流程:
   - 點擊 "點擊選擇" 選擇日期時間
   - 點擊重要性按鈕選擇重要性 (高/中/低)
   - 點擊分類按鈕選擇分類
   - 點擊 "點擊輸入" 並發送 `LIFF_NAME:測試活動` 輸入活動名稱
   - 點擊 "點擊輸入" 並發送 `LIFF_NOTES:這是測試備註` 輸入備註
   - 點擊 "送出" 按鈕提交表單

4. 確認活動創建成功，接收成功消息:
   ```
   ✅ 活動已設定成功！

   活動名稱: 測試活動
   時間: 2023/12/31 14:00
   分類: 會議
   重要性: 高
   備註: 這是測試備註
   ```

5. 使用查詢功能確認活動已成功添加到數據庫

#### 4. 兼容性測試

1. 確認舊功能仍正常工作:
   - 發送 "查詢活動" 消息
   - 發送 "手動提醒" 消息
   - 使用快速回覆按鈕

2. 測試指令格式:
   - 發送 `設定活動:測試活動,2023/12/31 14:00,會議,高,測試備註`
   - 發送 `查詢活動:2023/12/31`

### 已知限制

1. Rich Menu 圖片為臨時圖片，僅用於功能測試
2. 活動名稱和備註輸入需使用特定前綴 (`LIFF_NAME:` 和 `LIFF_NOTES:`)
3. 日期時間、重要性和分類選擇後，系統會發送確認消息，可能影響用戶體驗

### 問題排查

如遇到問題，請檢查:

1. 控制台日誌是否有錯誤信息
2. LINE API 回調是否成功
3. Rich Menu 是否成功創建 (控制台會輸出 ID)
4. 是否正確安裝了所有依賴，特別是 Pillow 庫

### 反饋收集

測試後請記錄:

1. Rich Menu 功能是否正常顯示和工作
2. Flex Message 表單是否可用，哪些部分需要改進
3. 用戶體驗建議和改進方向 